<template lang="pug">
  .FoodPicker
    .row
      h3.sectionTitle What to eat ?
    .row
      .form-group#budgetSelect
        label(for='budget') 💰 預算範圍
        select.form-control
          option(v-for="budget in budgets",
                 v-bind:value="budget.value") {{ budget.text }}
    .row
      .form-group#budgetSelect
        label(for='budget') 😋 種類
        select.form-control
          option(v-for="category in categories",
                 v-bind:value="category.value") {{ category.text }}
    .row
      .slotMachine.outerContainer
        .innerContainer
          .foodResult
            ul
              li 今天吃啥？
          .slotButton
            .slotTop
            .slotBody
      .slotButton
        button.start(@click="clickStart", v-if="randomShow===false") STAR
        button.stop(@click="clickStop", v-if="randomShow") STOP
</template>

<script>
export default {
  data() {
    return {
      selectedBudget: '0 ~ 100',
      budgets: [
        { text: "0 ~ 100", value: 0},
        { text: "100 ~ 150", value: 100},
        { text: "150 ~ 200", value: 150},
        { text: "200 up", value: 200},
      ],
      selectedCategory: '0 ~ 100',
      categories: [
        { text: "正餐", value: 'meal'},
        { text: "飲料", value: 'drink'},
      ],
      lists: ['全部','萬華區','中正區','大同區','中山區','大安區','南港區','文山區','松山區','信義區','士林區','北投區','內湖區','在家裡','在捷運上','在圖書館','在計程車上','在馬路上','在廁所','在辦公室','在家裡'],
      randomShow: false,
      timerId: '',
    }
  },
  mounted() {
    // this.clickStart();
  },
  computed: {
    randomResult() {
      const random = this.lists[Math.floor(Math.random() * this.lists.length)];
      return this.lists;
    },
  },
  methods: {
    clickStart() {
      const foodList = document.querySelector('.foodResult ul li');
      const randomFood = this.lists[Math.floor(Math.random() *
      this.lists.length)];
      this.randomShow = true;
      this.timerId = setInterval(this.interValFunc, 100);
    },
    interValFunc() {
      const foodList = document.querySelector('.foodResult ul li');
      const randomFood = this.lists[Math.floor(Math.random() *
      this.lists.length)];
      if(!this.randomShow) {
        clearInterval(this.timerId);
      }
      foodList.innerHTML = randomFood;
    },
    clickStop() {
      const foodList = document.querySelector('.foodResult ul li');
      this.randomShow = false;
    },
  }
}
</script>

<style lang="sass" scoped>
.FoodPicker
  position: relative
  height: 150vh
  margin-top: 60px
  overflow-x: hidden
  z-index: 0
  text-align: center

.sectionTitle
  margin-bottom: 30px
  font-weight: bold
  color: #507bb4
  font-size: 36px

.form-group#budgetSelect
  width: 200px
  position: relative
  margin-left: auto
  margin-right: auto
  select
    font-size: 16px

.slotMachine.outerContainer
    position: relative
    margin-top: 30px
    margin-left: auto
    margin-right: auto
    width: 70%
    min-width: 300px
    max-width: 600px
    height: 150px
    border: solid 1px
    border-radius: 10px
    box-shadow: 0 2px 10px rgba(#000, 0.4)
    background: linear-gradient(to bottom, #666, #444)

    .innerContainer
      position: absolute
      top: 15px
      left: 15px
      right: 15px
      bottom: 15px
      border: solid 1px
      text-align: center
      border-radius: 10px
      background: #333
      box-shadow: inset 0 0px 8px #000, 0 1px 0px  1px rgba(#fff, 0.4)

      .foodResult
        position: absolute
        top: 30px
        left: 10px
        right: 10px
        bottom: 30px
        padding-top: 10px
        padding-bottom: 10px
        text-align: center
        font-size: 30px
        font-weight: bold
        color: #fff
        overflow-y: hidden
        ul
          list-style: none
          margin: 0px
          padding: 0px
          li
            margin-bottom: 50px

.slotButton
  text-align: center
  margin-top: 40px
  button
    font-weight: 800
    letter-spacing: 1px
    color: #fff
    padding: 10px 40px
    border: solid 2px #333
    border-radius: 50px
    // box-shadow: 5px 5px 0px yellow, 3px 3px 10px blue

    &:focus
      outline: none

    &.start
      background-color: green

    &.stop
      background-color: red

@media only screen and (max-width: 480px)
  .FoodPicker
    text-align: center
    margin-top: 30px

  .sectionTitle
    font-size: 32px

  .form-group#budgetSelect
    label
      font-size: 24px

  .slotMachine.outerContainer
    width: 90%
    min-width: initial
    height: 100px
    .innerContainer
      .foodResult
        top: 10px
        bottom: 10px
        font-size: 18px
  .slotButton
    margin-top: 20px
    button
      font-size: 18px
</style>
